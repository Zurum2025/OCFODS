{% extends "student/stu_layout.html" %}

{% block student_content %}

<h2>Payment</h2>

<p>Order ID: {{ order.id }}</p>
<p>Total Amount: â‚¦{{ order.total_amount }}</p>

<button onclick="payWithPaystack()">Pay Now</button>

<script src="https://js.paystack.co/v1/inline.js"></script>

<script>
function payWithPaystack(){
  let handler = PaystackPop.setup({
    key: "{{ config.PAYSTACK_PUBLIC_KEY }}",
    email: "{{ current_user.email }}",
    amount: {{ order.total_amount * 100 }},
    callback: function(response){
      window.location.href = "/payment/verify/" + response.reference;
    }
  });
  handler.openIframe();
}
</script>
{% endblock %}